<main class="container my-5">
  <h2 class="text-center mb-4">Recuperar Contraseña</h2>

  <form [formGroup]="recuperarForm" (ngSubmit)="recuperar()" novalidate class="w-75 mx-auto">
    <div class="mb-3">
      <label for="email" class="form-label">Correo electrónico</label>
      <input type="email" id="email" formControlName="email" class="form-control"
             [class.is-invalid]="f['email'].touched && f['email'].invalid">
      <div class="invalid-feedback" *ngIf="f['email'].errors?.['required']">
        Este campo es obligatorio.
      </div>
      <div class="invalid-feedback" *ngIf="f['email'].errors?.['email']">
        Formato de correo inválido.
      </div>
    </div>

    <div *ngIf="error" class="alert alert-danger text-center">{{ error }}</div>
    <div *ngIf="mensaje" class="alert alert-success text-center">{{ mensaje }}</div>

    <div class="text-center">
      <button type="submit" class="btn-comprar w-100 mt-3">Recuperar</button>
    </div>
  </form>

  <!-- Formulario para cambiar contraseña -->
  <form *ngIf="usuarioEncontrado" [formGroup]="cambioForm" (ngSubmit)="cambiarPassword()" class="w-75 mx-auto mt-4">

    <div class="mb-3">
      <label for="nuevaPassword" class="form-label">Nueva Contraseña</label>
      <input type="password" id="nuevaPassword" formControlName="nuevaPassword" class="form-control"
             [class.is-invalid]="c['nuevaPassword'].touched && c['nuevaPassword'].invalid">
      <div class="invalid-feedback" *ngIf="c['nuevaPassword'].errors?.['required']">
        Este campo es obligatorio.
      </div>
      <div class="invalid-feedback" *ngIf="c['nuevaPassword'].errors?.['pattern']">
        Debe tener mínimo 8 caracteres, una mayúscula, un número y un símbolo.
      </div>
    </div>

    <div class="text-center">
      <button type="submit" class="btn-comprar w-100 mt-3">Cambiar Contraseña</button>
    </div>
  </form>
</main>
