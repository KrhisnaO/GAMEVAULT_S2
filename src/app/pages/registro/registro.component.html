<main class="container my-5 fade-in-up">
  <h2 class="text-center mb-4">Registro de Usuario 📝</h2>

  <!-- Mensajes de éxito y error -->
  <div *ngIf="error" class="alert alert-danger text-center">{{ error }}</div>
  <div *ngIf="exito" class="alert alert-success text-center">¡Registro exitoso! Redirigiendo...</div>

  <form [formGroup]="registroForm" (ngSubmit)="registrar()" novalidate class="w-75 mx-auto">

    <!-- Nombre -->
    <div class="mb-3">
      <label class="form-label">Nombre Completo</label>
      <input formControlName="nombre" class="form-control"
             [class.is-invalid]="f['nombre'].touched && f['nombre'].invalid" />
      <div class="invalid-feedback">Campo obligatorio</div>
    </div>

    <!-- Usuario -->
    <div class="mb-3">
      <label class="form-label">Nombre de Usuario</label>
      <input formControlName="usuario" class="form-control"
             [class.is-invalid]="f['usuario'].touched && f['usuario'].invalid" />
      <div class="invalid-feedback">Campo obligatorio</div>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label class="form-label">Correo electrónico</label>
      <input formControlName="email" class="form-control"
             [class.is-invalid]="f['email'].touched && f['email'].invalid" />
      <div class="invalid-feedback" *ngIf="f['email'].errors?.['required']">Correo requerido</div>
      <div class="invalid-feedback" *ngIf="f['email'].errors?.['email']">Formato inválido</div>
    </div>

    <!-- Fecha de nacimiento -->
    <div class="mb-3">
      <label class="form-label">Fecha de nacimiento</label>
      <input type="date" formControlName="fechaNacimiento" class="form-control"
             [class.is-invalid]="f['fechaNacimiento'].touched && f['fechaNacimiento'].invalid" />
      <div class="invalid-feedback" *ngIf="f['fechaNacimiento'].errors?.['edadMinima']">
        Debes tener al menos 13 años
      </div>
    </div>

    <!-- Contraseña -->
    <div class="mb-3">
      <label class="form-label">Contraseña</label>
      <input type="password" formControlName="password" class="form-control"
             [class.is-invalid]="f['password'].touched && f['password'].invalid" />
      <div class="invalid-feedback" *ngIf="f['password'].errors?.['required']">Campo obligatorio</div>
      <div class="invalid-feedback" *ngIf="f['password'].errors?.['pattern']">
        Debe tener al menos 8 caracteres, una mayúscula, un número y un símbolo
      </div>
    </div>

    <!-- Confirmar contraseña -->
    <div class="mb-3">
      <label class="form-label">Confirmar contraseña</label>
      <input type="password" formControlName="confirmarPassword" class="form-control"
             [class.is-invalid]="registroForm.errors?.['noCoinciden'] && f['confirmarPassword'].touched" />
      <div class="invalid-feedback" *ngIf="registroForm.errors?.['noCoinciden']">
        Las contraseñas no coinciden
      </div>
    </div>

    <!-- Botón de registro -->
    <button ype="submit" class="btn-comprar w-100 mt-3">Registrarse</button>

    <!-- Enlace al login -->
    <div class="text-center mt-3">
      <a routerLink="/login" class="back-button">¿Ya tienes cuenta? Inicia sesión</a>
    </div>
  </form>
</main>
